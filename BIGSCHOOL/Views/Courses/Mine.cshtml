@model IEnumerable<BIGSCHOOL.Models.Course>
@{
    ViewBag.Title = "Mine";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Mine</h2>
<ul class="course" style="margin-top:15px;">
    @foreach (var course in Model)
    {
        <li style="padding:20px;">
            <div class="date">
                <div class="month">
                    @course.DateTime.ToString("MM")
                </div>
                <div class="day">
                    @course.DateTime.ToString("dd")
                </div>
            </div>
            <div class="details">
                <p>
                    <span class="lecturer">
                        @course.Lecturer.Name
                    </span>
                </p>
                <p>
                    <span class="category">
                        @course.Category.Name
                    </span>
                </p>

            </div>
            <div class="action">
                <a href="@Url.Action("Edit","Courses",new { id =course.Id})">
                Edit</a> |
                <a href="" class="js-cancle-course" data-course-id="@course.Id ">Cancel</a>
            </div>
        </li>
    }
</ul>
 @section scripts
     {
     <script>
         $(document).ready(function () {
             $(".js-cancel-course").click(function (e) {
                 e.preventDefault();
                 var link = $(e.target);
                 bootbox.confirm("Are you sure to cancel ?",
                     function () {
                         $.ajax({
                             url: "/api/courses" + link.attr("data-course-id"),
                             method: "DELETE"
                         })
                             .done(function () {
                                 link.parents("li").fadeOut(function () {
                                     $(this).remove();
                                 });
                             })
                             .fail(function () {
                                 alert("Somethings failed!");
                             });
                     });
             });
         });

     </script>
     
     }
     
     
     
     